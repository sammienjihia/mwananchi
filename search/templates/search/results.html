
{% block body %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search results</title>
    {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static 'accounts/css/bootstrap.min.css' %}" />
    <script type="text/javascript" src="{% static 'search/js/samepage.js' %}"></script>
    <script type="text/javascript" src="{% static 'search/js/Chart.js' %}"></script>



</head>
<body>
<h3>Here is your search results:</h3>
            <h4>Total tweets returned: {{ tweetcount }}</h4>
            <h4>Total positive tweets: {{ postweets }}</h4>
            <h4>Total negative tweets: {{ negtweets }}</h4>
            <h4>Total neutral tweets: {{ neutweets }}</h4>
            <p>
                Show pages
                <span style="cursor: pointer; color: #1b6d85;" onclick="show('Page1');">Overview</span>,
                <span style="cursor: pointer; color: #1b6d85;" onclick="show('Page2');">Charts</span>,
            </p>
<div id="Page1" class="page" style="">
    <table>
    <thead>
        <tr>
            <th>Text</th>
            <th>Author</th>
            <th>Date</th>
            <th>Polarity</th>

        </tr>
    </thead>
    <tbody>
    {% if newdata %}


            {% for tweet in newdata %}

                <tr>
                    <td>{{ tweet.text }}</td>
                    <td>{{ tweet.author }}</td>
                    <td>{{ tweet.date }}</td>
                    {% if tweet.sentiments == 0.0 %}
                        <td>neutral</td>
                        <td>{{ tweet.sentiments }}</td>
                    {% elif tweet.sentiments < 0 %}
                        <td style="background-color: #761c19">negative</td>
                        <td>{{ tweet.sentiments }}</td>
                    {% else %}
                        <td style="background-color: #4cae4c">positive</td>
                        <td>{{ tweet.sentiments }}</td>
                    {% endif %}


                </tr>

            {% endfor %}


            {% else %}
                <h3>You have no data</h3>
            {% endif %}
            </tbody>



            </table>
</div>
<div id="Page2" class="page" style="display:none">

<canvas id="myChart" width="100" height="100"></canvas>
<script>
var ctx = document.getElementById("myChart");
var myChart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: ["Positive", "Negative", "Neutral"],
        datasets: [{
            label: '# of Votes',
            data: [{{ postweets }}, {{ negtweets }}, {{ neutweets }}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
</div>

</body>
</html>
{% endblock %}