{% extends 'accounts/base.html' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>







</head>
{% block body %}
<body>




    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Mwananchi</a>
            </div>

            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav">
                    <li>
                        <a href="index.html"><i class="fa fa-fw fa-dashboard"></i> Dashboard</a>
                    </li>
                    <li>
                        <a href="{% url 'search:search' %}"><i class="fa fa-fw fa-bar-chart-o"></i> Search Twitter</a>
                    </li>
                    <li class="active">
                        <a href="{% url 'sms:searchsms' %}"><i class="fa fa-fw fa-table"></i> Search SMS</a>
                    </li>
                    <li>
                        <a href="{% url 'twitterstream:tweetstream' %}"><i class="fa fa-fw fa-edit"></i> Twitter live streaming search</a>
                    </li>
                    <li>
                        <a href="{% url 'sms:sendsms' %}"><i class="fa fa-comments-o"></i> Send message</a>
                    </li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>



    </div>







<div id="page-wrapper" style="padding-left: 17%">

    <div class="container-fluid">

        <!-- Page Heading -->
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">
                    SMS Results
                    <small>results</small>
                </h1>
                <ol class="breadcrumb">
                    <li>
                        <i class="fa fa-dashboard"></i>  <a href="index.html">Dashboard</a>
                    </li>
                    <li class="active">
                        <i class="fa fa-file"></i> Text messages
                    </li>
                </ol>


            <div class="col-sm-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Here is your inbox results:</h3>
                    </div>
                    <ul class="list-group">
                        <li class="list-group-item">Total sms' returned: {{ smscount }}</li>
                        <li class="list-group-item">Total positive sms': {{ posisms }}</li>
                        <li class="list-group-item">Total negative sms': {{ negsms }}</li>
                        <li class="list-group-item">Total neutral sms': {{ neutsms }}</li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-12">
                <p>
                    Show pages
                    <span style="cursor: pointer; color: #1b6d85;" onclick="show('Page1');">Overview</span>,
                    <span style="cursor: pointer; color: #1b6d85;" onclick="show('Page2');">Charts</span>,
                </p>
            </div>


<div id="Page1" class="page" style="">
    <table class="table table-bordered table-hover table-striped">
    <thead>
        <tr>
            <th>From</th>
            <th>To</th>
            <th>Date</th>
            <th>Message</th>
            <th>sentiment</th>
            <th>Polarity value</th>
            <th>Keywords</th>

        </tr>
    </thead>
    <tbody>
    {% if inmessages %}



            {% for message in inmessages %}
                <tr>
                    <td>{{ message.sender }}</td>
                    <td>{{ message.to }}</td>
                    <td>{{ message.date }}</td>
                    <td>{{ message.text }}</td>
                    {% if message.polarity == 0.0 %}
                        <td>neutral</td>
                        <td>{{ message.polarity }}</td>
                    {% elif message.polarity < 0 %}
                        <td style="background-color: #761c19">negative</td>
                        <td>{{ message.polarity }}</td>
                    {% else %}
                        <td style="background-color: #4cae4c">positive</td>
                        <td>{{ message.polarity }}</td>
                    {% endif %}

                    <td>{{ message.keyword }}</td>
                </tr>

            {% endfor %}

    {% else %}
        <h3>You have no messages</h3>
    {% endif %}
    </tbody>


    </table>
    </div>



<div id="Page2" class="page" style="display:none">

<canvas id="myChart" width="400" height="400"></canvas>
<script>
var ctx = document.getElementById("myChart");
Chart.defaults.global.maintainAspectRatio = false;
Chart.defaults.global.responsive = false;
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ["Positive", "Negative", "Neutral"],
        datasets: [{
            label: 'Sentiments expressed by tweets',
            data: [{{ posisms }}, {{ negsms }}, {{ neutsms }}],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>
</div>






                </ol>
            </div>
        </div>
        <!-- /.row -->

    </div>
    <!-- /.container-fluid -->

</div>
<!-- /#page-wrapper -->



</body>
</html>
{% endblock %}